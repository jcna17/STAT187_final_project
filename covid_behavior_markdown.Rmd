---
title: "Covid Behavior"
author: "Jake Campbell, Jin Lee, and Julie Grossman"
date: "4/5/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)

raw_data <- read_csv("covid_behavior.csv")
```

## I. Introduction
This data, which examines people’s behaviors in response to the COVID-19 pandemic, comes from Imperial College London. The data also includes information about COVID-19 test results. Data collection started in March 2020 and is ongoing,, but the subset of the data being used for this project was collected between March 2020 and July 2020. The dataset description does not detail the sampling method, but it states that responses are nationally representative of the general public and that, “people with severe symptoms, people who have been hospitalized, and some other hard to reach group will be under-represented in the sample.” No other sampling bias is suspected. 

This data was collected through interviews and represents an observational study, as there is no direct intervention by the researchers. No bias is suspected in the questions as they were created by a well-respected institution and measure primarily objective factors, such as frequencies as counts. The measurements may be biased towards behaviors that are seen as socially acceptable as people may not feel comfortable admitting to a researcher that they don’t do things like wear a mask or avoid large gatherings.

This data is very relevant as it is about a pandemic that is ongoing. It has been shown that individual behavior has a significant impact on the spread of COVID-19, so examining COVID-related behavior across the United States could potentially be used to identify areas that are likely to have outbreaks. It’s also interesting to observe how COVID-related behavior varies across the United States.

The data was cleaned by first removing the second row of column headers. Columns that were not of interest were removed, and then the remaining columns were renamed to make them easier to work with. All of the data was read in as character data, so columns that contained factor or numeric data were transformed into their respective data type. The data cleaning code can be seen below.


```{r subset_rename}
#remove second row of headers
data <- raw_data[-1,]

#select columns of interest
data <- data %>%
  select("endtime" : "#times wash/sani", "gender" : "employment_status")

#display names before renaming
head(names(data), 10)

#rename columns
new_names <- c("endtime", 
               "state", "qweek", 
               "hh_contact", "non_hh_contact",
               "n_leave_home", "tested", 
               "hh_tested", "cough", 
               "fever", "lost_smell",
               "lost_taste", "short_of_breath", 
               "no_symp", "contact_symp_person",
               "isolate_after_symp", "doctor_after_symp", 
               "travel_before_symp", "isolate_if_symp", 
               "isolation_ease", "isolation_willingness", 
               "mask", "hand_washing", 
               "sanitizer", "cover_mouth", 
               "avoid_symp_person", "avoid_going_out", 
               "avoid_healthcare", "avoid_pub_transport",
               "avoid_work_not_home", "avoid_school_not_home", 
               "avoid_guests", "avoid_s_gath", 
               "avoid_m_gath", "avoid_l_gath", 
               "avoid_crowds", "avoid_shopping", 
               "stop_share_bedroom", "stop_share_meals",
               "surface_cleaning", "avoid_touching_public_objects", 
               "n_wash_sanitize", "gender", 
               "age", "hh_size",
               "hh_children", "emp_status"
               )

names(data) <- new_names

#display names after renaming
head(names(data), 10)

```
```{r recode, warning = FALSE}
#display data summary before recoding
#note how all columns are character data
head(summary(data[13:20]))

#commonly used factor levels
yn_levels <- c("No", "Yes")
freq_levels <- c("Not at all", "Rarely", "Sometimes", "Frequently", "Always")

data_recode <- data %>%
  #convert from character to numeric
  mutate(hh_contact = as.numeric(hh_contact),
         non_hh_contact = as.numeric(non_hh_contact),
         n_leave_home = as.numeric(n_leave_home),
         age = as.numeric(age),
         hh_size = as.numeric(hh_size),
         hh_children = as.numeric(hh_children),
         n_wash_sanitize = as.numeric(n_wash_sanitize)
         ) %>%
  #convert from yes/no character to factor
  mutate(cough = factor(cough, levels = yn_levels),
         fever = factor(fever, levels = yn_levels),
         lost_smell = factor(lost_smell, levels = yn_levels),
         lost_taste = factor(lost_taste, levels = yn_levels),
         short_of_breath = factor(short_of_breath, levels = yn_levels),
         no_symp = factor(no_symp, levels = yn_levels),
         doctor_after_symp = factor(doctor_after_symp, levels = yn_levels),
         ) %>%
  #convert from frequency character to factor
  mutate(mask = factor(mask, levels = freq_levels),
         hand_washing = factor(hand_washing, levels = freq_levels),
         sanitizer = factor(sanitizer, levels = freq_levels),
         cover_mouth = factor(cover_mouth, levels = freq_levels),
         avoid_symp_person = factor(avoid_symp_person, levels = freq_levels),
         avoid_going_out = factor(avoid_going_out, levels = freq_levels),
         avoid_healthcare = factor(avoid_healthcare, levels = freq_levels),
         avoid_pub_transport = factor(avoid_pub_transport, levels = freq_levels),
         avoid_work_not_home = factor(avoid_work_not_home, levels = freq_levels),
         avoid_school_not_home = factor(avoid_school_not_home, levels = freq_levels),
         avoid_guests = factor(avoid_guests, levels = freq_levels),
         avoid_s_gath = factor(avoid_s_gath, levels = freq_levels),
         avoid_m_gath = factor(avoid_m_gath, levels = freq_levels),
         avoid_l_gath = factor(avoid_l_gath, levels = freq_levels),
         avoid_crowds = factor(avoid_crowds, levels = freq_levels),
         avoid_shopping = factor(avoid_shopping, levels = freq_levels),
         stop_share_bedroom = factor(stop_share_bedroom, levels = freq_levels),
         stop_share_meals = factor(stop_share_meals, levels = freq_levels),
         surface_cleaning = factor(surface_cleaning, levels = freq_levels),
         avoid_touching_public_objects = factor(avoid_touching_public_objects, levels = freq_levels),
         isolate_after_symp = factor(isolate_after_symp, levels = freq_levels)
         ) %>%
  #convert other characters to factor
  mutate(tested = factor(tested, 
                         levels = c("No, I have not", "Yes, and I tested positive",
                                            "Yes, and I have not received my results from the test yet",                                                 "Yes, and I tested negative"),
                         labels = c("N", "Y+", "Y~", "Y-")),
         hh_tested = factor(hh_tested, 
                            levels = c("No, they have not", "Yes, and they tested positive",
                                                  "Yes, and they have not received their results from the test yet", "Yes, and they tested negative"), 
                            labels = c("N", "Y+", "Y~", "Y-")),
         gender = factor(gender, levels = c("Male", "Female")),
         contact_symp_person = factor(contact_symp_person,
                                      levels = c("Not sure", "No", "Yes")),
         travel_before_symp = factor(travel_before_symp,levels = c("Not sure", "No", "Yes")),
         isolate_if_symp = factor(isolate_if_symp, levels = c("Not sure", "No", "Yes")),
         isolation_ease = factor(isolation_ease, 
                                 levels = c("Not sure", "Very difficult", "Somewhat difficult",
                                            "Neither easy nor difficult", "Somewhat easy",
                                            "Very easy")),
         isolation_willingness = factor(isolation_willingness,
                                        levels = c("Not sure", "Very unwilling",
                                                   "Somewhat unwilling",
                                                   "Neither willing nor unwilling",
                                                   "Somewhat willing", "Very willing")),
         emp_status = factor(emp_status,
                                    levels = c("Other", "Retired", "Not working", "Unemployed",
                                               "Full time student", "Part time employment",
                                               "Full time employment"))
                                 
         
         )


#display data summary after recoding
head(summary(data_recode[13:20]))

```




## II. Data Visualizations

## III. Machine Learning Methods

## IV. Conclusions

## V. Limitations/Recommendations




